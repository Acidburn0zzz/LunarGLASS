
Top IR:
; ModuleID = 'Glslang'

@face1 = internal global float 0.000000e+00
@low = external addrspace(2) constant i32
@high = external addrspace(2) constant i32
@gl_FragColor = global <4 x float> zeroinitializer
@face2 = internal global float 0.000000e+00

define fastcc void @main() {
entry:
  %gl_FragColor = alloca <4 x float>
  %z = alloca i32
  store float 1.100000e+01, float* @face1
  store float -2.000000e+00, float* @face2
  br label %mainBody

mainBody:                                         ; preds = %entry
  store i32 3, i32* %z
  %0 = load i32 addrspace(2)* @low, !gla.uniform !1
  %1 = mul i32 2, %0, !gla.precision !6
  %2 = add i32 %1, 1, !gla.precision !6
  %3 = load i32 addrspace(2)* @high, !gla.uniform !3
  %4 = icmp slt i32 %2, %3
  br i1 %4, label %then, label %ifmerge

then:                                             ; preds = %mainBody
  %5 = load i32* %z
  %z1 = add i32 %5, 1, !gla.precision !6
  store i32 %z1, i32* %z
  br label %ifmerge

ifmerge:                                          ; preds = %mainBody, %then
  %6 = load float* @face1
  %7 = load i32* %z
  %8 = sitofp i32 %7 to float, !gla.precision !7
  %9 = load <4 x float>* %gl_FragColor
  %10 = insertelement <4 x float> undef, float %8, i32 0, !gla.precision !7
  %11 = insertelement <4 x float> %10, float %8, i32 1, !gla.precision !7
  %12 = insertelement <4 x float> %11, float %8, i32 2, !gla.precision !7
  %13 = insertelement <4 x float> %12, float %8, i32 3, !gla.precision !7
  %14 = insertelement <4 x float> undef, float %6, i32 0, !gla.precision !7
  %15 = insertelement <4 x float> %14, float %6, i32 1, !gla.precision !7
  %16 = insertelement <4 x float> %15, float %6, i32 2, !gla.precision !7
  %17 = insertelement <4 x float> %16, float %6, i32 3, !gla.precision !7
  %18 = fmul <4 x float> %17, %13, !gla.precision !7
  %19 = call float @"foo("()
  %20 = insertelement <4 x float> undef, float %19, i32 0, !gla.precision !7
  %21 = insertelement <4 x float> %20, float %19, i32 1, !gla.precision !7
  %22 = insertelement <4 x float> %21, float %19, i32 2, !gla.precision !7
  %23 = insertelement <4 x float> %22, float %19, i32 3, !gla.precision !7
  %gl_FragColor2 = fadd <4 x float> %18, %23, !gla.precision !7
  store <4 x float> %gl_FragColor2, <4 x float>* @gl_FragColor
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %ifmerge
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

; Function Attrs: alwaysinline
define internal fastcc float @"foo("() #0 {
entry:
  %0 = load float* @face2
  ret float %0

post-return:                                      ; No predecessors!
  unreachable
}

attributes #0 = { alwaysinline }

!gla.entrypoint = !{!0}
!gla.uniforms = !{!1, !3}
!gla.outputs = !{!4}

!0 = !{!"main", i32 15}
!1 = !{!"low", i32 12, i32* @low_typeProxy, !2}
!2 = !{i32 0, i32 2, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!3 = !{!"high", i32 12, i32* @high_typeProxy, !2}
!4 = !{!"gl_FragColor", i32 7, <4 x float>* @gl_FragColor_typeProxy, !5}
!5 = !{i32 0, i32 2, i32 1024, null, i32 0, i32 43, i32 -1, i32 0, i32 -1}
!6 = !{i32 2}
!7 = !{i32 1}
