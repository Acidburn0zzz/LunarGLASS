
Top IR:
; ModuleID = 'Glslang'

%s1 = type { i32, float }
%s2 = type { i32, float, %s1 }

@u = global <4 x float> zeroinitializer
@a = internal constant %s1 { i32 14, float 1.400000e+01 }
@b = internal constant %s1 { i32 17, float 1.700000e+01 }
@w = global <4 x float> zeroinitializer
@foo2a = external addrspace(2) constant %s2
@foo2b = external addrspace(2) constant %s2
@sampler = external addrspace(1) constant i32
@coord = global <2 x float> zeroinitializer
@gl_FragColor = global <4 x float> zeroinitializer
@foo1 = external addrspace(2) constant %s1

define fastcc void @main() {
entry:
  %v = alloca <4 x float>
  %b7 = alloca [3 x %s1]
  %b6 = alloca %s1
  %b5 = alloca %s1
  %b = alloca [3 x %s1]
  %a3 = alloca [3 x %s1]
  %a2 = alloca %s1
  %a1 = alloca %s1
  %a = alloca [3 x %s1]
  br label %mainBody

mainBody:                                         ; preds = %entry
  %0 = load <4 x float>* @u
  %1 = extractelement <4 x float> %0, i32 0
  %2 = fptosi float %1 to i32
  %3 = load <4 x float>* @u
  %4 = extractelement <4 x float> %3, i32 1
  %5 = getelementptr %s1* %a1, i32 0, i32 0
  store i32 %2, i32* %5
  %6 = getelementptr %s1* %a1, i32 0, i32 1
  store float %4, float* %6
  %7 = load %s1* %a1
  %8 = load <4 x float>* @u
  %9 = extractelement <4 x float> %8, i32 2
  %10 = fptosi float %9 to i32
  %11 = load <4 x float>* @u
  %12 = extractelement <4 x float> %11, i32 3
  %13 = getelementptr %s1* %a2, i32 0, i32 0
  store i32 %10, i32* %13
  %14 = getelementptr %s1* %a2, i32 0, i32 1
  store float %12, float* %14
  %15 = load %s1* %a2
  %16 = load %s1* @a
  %17 = getelementptr [3 x %s1]* %a3, i32 0, i32 0
  store %s1 %7, %s1* %17
  %18 = getelementptr [3 x %s1]* %a3, i32 0, i32 1
  store %s1 %15, %s1* %18
  %19 = getelementptr [3 x %s1]* %a3, i32 0, i32 2
  store %s1 %16, %s1* %19
  %a4 = load [3 x %s1]* %a3
  store [3 x %s1] %a4, [3 x %s1]* %a
  %20 = load %s1* @b
  %21 = load <4 x float>* @w
  %22 = extractelement <4 x float> %21, i32 0
  %23 = fptosi float %22 to i32
  %24 = load <4 x float>* @w
  %25 = extractelement <4 x float> %24, i32 1
  %26 = getelementptr %s1* %b5, i32 0, i32 0
  store i32 %23, i32* %26
  %27 = getelementptr %s1* %b5, i32 0, i32 1
  store float %25, float* %27
  %28 = load %s1* %b5
  %29 = load <4 x float>* @w
  %30 = extractelement <4 x float> %29, i32 2
  %31 = fptosi float %30 to i32
  %32 = load <4 x float>* @w
  %33 = extractelement <4 x float> %32, i32 3
  %34 = getelementptr %s1* %b6, i32 0, i32 0
  store i32 %31, i32* %34
  %35 = getelementptr %s1* %b6, i32 0, i32 1
  store float %33, float* %35
  %36 = load %s1* %b6
  %37 = getelementptr [3 x %s1]* %b7, i32 0, i32 0
  store %s1 %20, %s1* %37
  %38 = getelementptr [3 x %s1]* %b7, i32 0, i32 1
  store %s1 %28, %s1* %38
  %39 = getelementptr [3 x %s1]* %b7, i32 0, i32 2
  store %s1 %36, %s1* %39
  %b8 = load [3 x %s1]* %b7
  store [3 x %s1] %b8, [3 x %s1]* %b
  %40 = load %s2 addrspace(2)* @foo2a, !gla.uniform !7
  %41 = load %s2 addrspace(2)* @foo2b, !gla.uniform !13
  %element1 = extractvalue %s2 %40, 0
  %element2 = extractvalue %s2 %41, 0
  %42 = icmp eq i32 %element1, %element2
  %element19 = extractvalue %s2 %40, 1
  %element210 = extractvalue %s2 %41, 1
  %43 = fcmp oeq float %element19, %element210
  %44 = and i1 %42, %43
  %element111 = extractvalue %s2 %40, 2
  %element212 = extractvalue %s2 %41, 2
  %element113 = extractvalue %s1 %element111, 0
  %element214 = extractvalue %s1 %element212, 0
  %45 = icmp eq i32 %element113, %element214
  %element115 = extractvalue %s1 %element111, 1
  %element216 = extractvalue %s1 %element212, 1
  %46 = fcmp oeq float %element115, %element216
  %47 = and i1 %45, %46
  %48 = and i1 %44, %47
  br i1 %48, label %then, label %else

then:                                             ; preds = %mainBody
  %49 = load i32 addrspace(1)* @sampler, !gla.uniform !14
  %50 = load <2 x float>* @coord
  %v18 = call <4 x float> @llvm.gla.fTextureSample.v4f32.v2f32(i32 2, i32 %49, i32 0, <2 x float> %50)
  store <4 x float> %v18, <4 x float>* %v
  br label %ifmerge

else:                                             ; preds = %mainBody
  %51 = load i32 addrspace(1)* @sampler, !gla.uniform !14
  %52 = load <2 x float>* @coord
  %53 = fmul <2 x float> <float 2.000000e+00, float 2.000000e+00>, %52
  %v20 = call <4 x float> @llvm.gla.fTextureSample.v4f32.v2f32(i32 2, i32 %51, i32 0, <2 x float> %53)
  store <4 x float> %v20, <4 x float>* %v
  br label %ifmerge

ifmerge:                                          ; preds = %else, %then
  %54 = load <4 x float>* @u
  %55 = load <4 x float>* %v
  %56 = fcmp oeq <4 x float> %54, %55
  %cc = call i1 @llvm.gla.all.v4i1(<4 x i1> %56)
  br i1 %cc, label %then21, label %ifmerge23

then21:                                           ; preds = %ifmerge
  %57 = load <4 x float>* %v
  %v22 = fmul <4 x float> %57, <float 3.000000e+00, float 3.000000e+00, float 3.000000e+00, float 3.000000e+00>
  store <4 x float> %v22, <4 x float>* %v
  br label %ifmerge23

ifmerge23:                                        ; preds = %ifmerge, %then21
  %58 = load <4 x float>* @u
  %59 = load <4 x float>* %v
  %60 = fcmp one <4 x float> %58, %59
  %cc24 = call i1 @llvm.gla.any.v4i1(<4 x i1> %60)
  br i1 %cc24, label %then25, label %ifmerge27

then25:                                           ; preds = %ifmerge23
  %61 = load <4 x float>* %v
  %v26 = fmul <4 x float> %61, <float 4.000000e+00, float 4.000000e+00, float 4.000000e+00, float 4.000000e+00>
  store <4 x float> %v26, <4 x float>* %v
  br label %ifmerge27

ifmerge27:                                        ; preds = %ifmerge23, %then25
  %62 = load <2 x float>* @coord
  %63 = load <4 x float>* %v
  %64 = extractelement <4 x float> %63, i32 1
  %65 = insertelement <2 x float> undef, float %64, i32 0
  %66 = extractelement <4 x float> %63, i32 3
  %67 = insertelement <2 x float> %65, float %66, i32 1
  %68 = fcmp oeq <2 x float> %62, %67
  %cc28 = call i1 @llvm.gla.all.v2i1(<2 x i1> %68)
  br i1 %cc28, label %then29, label %ifmerge31

then29:                                           ; preds = %ifmerge27
  %69 = load <4 x float>* %v
  %v30 = fmul <4 x float> %69, <float 5.000000e+00, float 5.000000e+00, float 5.000000e+00, float 5.000000e+00>
  store <4 x float> %v30, <4 x float>* %v
  br label %ifmerge31

ifmerge31:                                        ; preds = %ifmerge27, %then29
  %70 = load [3 x %s1]* %a
  %71 = load [3 x %s1]* %b
  %element132 = extractvalue [3 x %s1] %70, 0
  %element233 = extractvalue [3 x %s1] %71, 0
  %element134 = extractvalue %s1 %element132, 0
  %element235 = extractvalue %s1 %element233, 0
  %72 = icmp eq i32 %element134, %element235
  %element136 = extractvalue %s1 %element132, 1
  %element237 = extractvalue %s1 %element233, 1
  %73 = fcmp oeq float %element136, %element237
  %74 = and i1 %72, %73
  %element138 = extractvalue [3 x %s1] %70, 1
  %element239 = extractvalue [3 x %s1] %71, 1
  %element140 = extractvalue %s1 %element138, 0
  %element241 = extractvalue %s1 %element239, 0
  %75 = icmp eq i32 %element140, %element241
  %element142 = extractvalue %s1 %element138, 1
  %element243 = extractvalue %s1 %element239, 1
  %76 = fcmp oeq float %element142, %element243
  %77 = and i1 %75, %76
  %78 = and i1 %74, %77
  %element144 = extractvalue [3 x %s1] %70, 2
  %element245 = extractvalue [3 x %s1] %71, 2
  %element146 = extractvalue %s1 %element144, 0
  %element247 = extractvalue %s1 %element245, 0
  %79 = icmp eq i32 %element146, %element247
  %element148 = extractvalue %s1 %element144, 1
  %element249 = extractvalue %s1 %element245, 1
  %80 = fcmp oeq float %element148, %element249
  %81 = and i1 %79, %80
  %82 = and i1 %78, %81
  br i1 %82, label %then50, label %ifmerge52

then50:                                           ; preds = %ifmerge31
  %83 = load <4 x float>* %v
  %v51 = fmul <4 x float> %83, <float 6.000000e+00, float 6.000000e+00, float 6.000000e+00, float 6.000000e+00>
  store <4 x float> %v51, <4 x float>* %v
  br label %ifmerge52

ifmerge52:                                        ; preds = %ifmerge31, %then50
  %84 = load [3 x %s1]* %a
  %85 = load [3 x %s1]* %b
  %element153 = extractvalue [3 x %s1] %84, 0
  %element254 = extractvalue [3 x %s1] %85, 0
  %element155 = extractvalue %s1 %element153, 0
  %element256 = extractvalue %s1 %element254, 0
  %86 = icmp ne i32 %element155, %element256
  %element157 = extractvalue %s1 %element153, 1
  %element258 = extractvalue %s1 %element254, 1
  %87 = fcmp one float %element157, %element258
  %88 = or i1 %86, %87
  %element159 = extractvalue [3 x %s1] %84, 1
  %element260 = extractvalue [3 x %s1] %85, 1
  %element161 = extractvalue %s1 %element159, 0
  %element262 = extractvalue %s1 %element260, 0
  %89 = icmp ne i32 %element161, %element262
  %element163 = extractvalue %s1 %element159, 1
  %element264 = extractvalue %s1 %element260, 1
  %90 = fcmp one float %element163, %element264
  %91 = or i1 %89, %90
  %92 = or i1 %88, %91
  %element165 = extractvalue [3 x %s1] %84, 2
  %element266 = extractvalue [3 x %s1] %85, 2
  %element167 = extractvalue %s1 %element165, 0
  %element268 = extractvalue %s1 %element266, 0
  %93 = icmp ne i32 %element167, %element268
  %element169 = extractvalue %s1 %element165, 1
  %element270 = extractvalue %s1 %element266, 1
  %94 = fcmp one float %element169, %element270
  %95 = or i1 %93, %94
  %96 = or i1 %92, %95
  br i1 %96, label %then71, label %ifmerge73

then71:                                           ; preds = %ifmerge52
  %97 = load <4 x float>* %v
  %v72 = fmul <4 x float> %97, <float 7.000000e+00, float 7.000000e+00, float 7.000000e+00, float 7.000000e+00>
  store <4 x float> %v72, <4 x float>* %v
  br label %ifmerge73

ifmerge73:                                        ; preds = %ifmerge52, %then71
  %gl_FragColor = load <4 x float>* %v
  store <4 x float> %gl_FragColor, <4 x float>* @gl_FragColor
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %ifmerge73
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

; Function Attrs: nounwind readnone
declare <4 x float> @llvm.gla.fTextureSample.v4f32.v2f32(i32, i32, i32, <2 x float>) #0

; Function Attrs: nounwind readnone
declare i1 @llvm.gla.all.v4i1(<4 x i1>) #0

; Function Attrs: nounwind readnone
declare i1 @llvm.gla.any.v4i1(<4 x i1>) #0

; Function Attrs: nounwind readnone
declare i1 @llvm.gla.all.v2i1(<2 x i1>) #0

attributes #0 = { nounwind readnone }

!gla.entrypoint = !{!0}
!gla.inputs = !{!1, !3, !5}
!gla.uniforms = !{!7, !13, !14, !17}
!gla.outputs = !{!18}
!gla.noStaticUse = !{!17}

!0 = !{!"main", i32 15}
!1 = !{!"u", i32 1, <4 x float>* @u_typeProxy, !2}
!2 = !{i32 0, i32 0, i32 1024, null, i32 1, i32 0, i32 -1, i32 0, i32 -1}
!3 = !{!"w", i32 1, <4 x float>* @w_typeProxy, !4}
!4 = !{i32 0, i32 0, i32 1025, null, i32 1, i32 0, i32 -1, i32 0, i32 -1}
!5 = !{!"coord", i32 1, <2 x float>* @coord_typeProxy, !6}
!6 = !{i32 0, i32 0, i32 1026, null, i32 1, i32 0, i32 -1, i32 0, i32 -1}
!7 = !{!"foo2a", i32 12, %s2* @foo2a_typeProxy, !8, !9}
!8 = !{i32 4, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!9 = !{!"s2", !8, !"i", !10, !"f", !10, !"s1_1", !12}
!10 = !{!"", !11}
!11 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!12 = !{!"s1", !8, !"i", !10, !"f", !10}
!13 = !{!"foo2b", i32 12, %s2* @foo2b_typeProxy, !8, !9}
!14 = !{!"sampler", i32 12, i32* @sampler_typeProxy, !15}
!15 = !{i32 5, i32 0, i32 1024, !16, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!16 = !{i32 0, i32* @sampler_typeProxy, i32 1, i1 false, i1 false, i32 0}
!17 = !{!"foo1", i32 12, %s1* @foo1_typeProxy, !8, !12}
!18 = !{!"gl_FragColor", i32 7, <4 x float>* @gl_FragColor_typeProxy, !19}
!19 = !{i32 0, i32 0, i32 1027, null, i32 0, i32 43, i32 -1, i32 0, i32 -1}
